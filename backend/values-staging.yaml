namespace: fleet-staging

postgres:
  host: postgres
  port: 5432

  # Use ONE consistent DB + user + pass for all services
  # (Matches the Postgres deployment I gave: fleet / fleetuser / fleetpass)
  driverDb: fleet
  driverUser: fleetuser
  driverPass: fleetpass

  maintenanceDb: fleet
  maintenanceUser: fleetuser
  maintenancePass: fleetpass

  vehicleDb: fleet
  vehicleUser: fleetuser
  vehiclePass: fleetpass

driver:
  replicaCount: 1
  image:
    repository: muhammedsafry/fleet-driver-service
    tag: "2-f51bb4e"
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 8080
    targetPort: 8080
  env:
    SPRING_PROFILES_ACTIVE: "staging"
    # Spring Boot datasource (Flyway/JPA)
    SPRING_DATASOURCE_URL: "jdbc:postgresql://postgres:5432/fleet"
    SPRING_DATASOURCE_USERNAME: "fleetuser"
    SPRING_DATASOURCE_PASSWORD: "fleetpass"

maintenance:
  replicaCount: 1
  image:
    repository: muhammedsafry/fleet-maintenance-service
    tag: "2-f51bb4e"
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 5001
    targetPort: 5001
  env:
    # keep as development unless your config has "staging"
    FLASK_ENV: "development"
    FLASK_APP: "run.py"
    PYTHONUNBUFFERED: "1"
    # SQLAlchemy / Alembic DB URL
    DATABASE_URL: "postgresql+psycopg2://fleetuser:fleetpass@postgres:5432/fleet"

vehicle:
  replicaCount: 1
  image:
    repository: muhammedsafry/fleet-vehicle-service
    tag: "2-f51bb4e"
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 7001
    targetPort: 8080
  env:
    ASPNETCORE_ENVIRONMENT: "Staging"
    ASPNETCORE_URLS: "http://+:8080"
    CORS_ORIGINS: "*"
    # .NET EF Core connection string
    ConnectionStrings__DefaultConnection: "Host=postgres;Port=5432;Database=fleet;Username=fleetuser;Password=fleetpass"
